<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feather World boardType</title>
  <link rel="stylesheet" href="/css/board/boardType-style.css">

</head>

<body>

  <div class="container">
    <div class="sidebar" id="boardListFragment">
      <div class="board-header">
        <span>Board List</span>
        <button class="edit-btn" id="editBoardListBtn">
          EDIT
        </button>
      </div>

      <ul class="folder-list" id="folderList">
        <li class="folder-item active" data-default="true" data-id="1">
          <div class="folder-content">
            <span class="folder-name">public</span>
          </div>
          <div class="folder-actions">
            <button class="edit-folder-btn">
              EDIT
            </button>
          </div>
        </li>

        <li class="folder-item" data-id="2">
          <div class="folder-content">
            <span class="friend-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-people-fill" viewBox="0 0 16 16">
                <path
                  d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" />
              </svg>
            </span>
            <span class="folder-name">friend</span>
          </div>
          <div class="folder-actions">
            <button class="edit-folder-btn">
              EDIT
            </button>
            <button class="delete-folder-btn">
              DELETE
            </button>
          </div>
        </li>
      </ul>

      <div class="add-folder" id="addFolderBtn">
        <div class="add-folder-icon">+</div>
        <span>Add Folder</span>
      </div>

      <div class="new-folder-form" id="newFolderForm">
        <input type="text" class="new-folder-input" id="newFolderInput" placeholder="Please input Name...">

        <div class="privacy-options">
          <label class="privacy-option">
            <input type="radio" name="privacy" value="public" checked>
            <span>Public</span>
          </label>
          <label class="privacy-option">
            <input type="radio" name="privacy" value="friend">
            <span>Friend</span>
          </label>
        </div>

        <div class="new-folder-actions">
          <button class="make-new-btn" id="makeNewBtn">Make New</button>
          <button class="cancel-btn" id="cancelBtn">Cancel</button>
        </div>
      </div>
    </div>
    <!------------------------------------------------------------------------------------------->

    <!-- <!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Ìè¥Îçî ÎπÑÎèôÍ∏∞ ÌÖåÏä§Ìä∏</title>
</head>
<body> -->

    <!-- <h3> Ìè¥Îçî Ï∂îÍ∞Ä</h3>
  <input id="folderName" placeholder="Ìè¥Îçî Ïù¥Î¶Ñ">
  <select id="authority">
    <option value="0">Ï†ÑÏ≤¥Í≥µÍ∞ú</option>
    <option value="1">ÏπúÍµ¨Í≥µÍ∞ú</option>
  </select>
  <button onclick="addFolder()">Ï∂îÍ∞Ä</button>

  <script>
    const memberNo = 3; // ÌÖåÏä§Ìä∏Ïö© memberNo (ÏÑ∏ÏÖò loginMember Í∏∞Ï§ÄÏúºÎ°ú Î∞îÍøîÎèÑ Îê®)

    // Ìè¥Îçî Î™©Î°ù Ï°∞Ìöå

    document.addEventListener("DOMContentLoaded", () => {
  loadFolders(); // ÌéòÏù¥ÏßÄ Ïó¥Î¶¨ÏûêÎßàÏûê Î™©Î°ù Î∂àÎü¨Ïò§Í∏∞
});

    function loadFolders() {
      fetch(`/board/folder/${memberNo}`)
        .then(resp => resp.json())
        .then(list => {
          const ul = document.getElementById('folderList');
          ul.innerHTML = ''; // Ï¥àÍ∏∞Ìôî

          list.forEach(f => {
            const li = document.createElement('li');
            li.innerHTML = `
              <strong>${f.boardName}</strong>
              ${f.authority == 1 ? 'üë•' : ''}
              <button onclick="editFolder(${f.boardCode})">‚úè</button>
              <button onclick="deleteFolder(${f.boardCode})">üóë</button>
            `;
            ul.appendChild(li);
          });
        });
    }

    // Ìè¥Îçî Ï∂îÍ∞Ä
function addFolder() {
  const name = document.getElementById('folderName').value;
  const auth = parseInt(document.getElementById('authority').value);

  const data = { boardName: name, authority: auth };
  console.log("Î≥¥ÎÇ¥Îäî Îç∞Ïù¥ÌÑ∞:", data);

  fetch("/board/folder", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(data)
  })
  .then(resp => resp.text())
  .then(result => {
    console.log("ÏùëÎãµÍ≤∞Í≥º:", result);
    if (result === 'success') {
      alert("Ï∂îÍ∞Ä ÏÑ±Í≥µ!");
      loadFolders();
    } else {
      alert("Ï∂îÍ∞Ä Ïã§Ìå®!");
    }
  });
}

    // Ìè¥Îçî Ïù¥Î¶Ñ ÏàòÏ†ï
    function editFolder(boardCode) {
      const newName = prompt("ÏÉà Ìè¥Îçî Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî");
      if (!newName) return;

      fetch("/board/folder", {
        method: "PUT",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ boardCode: boardCode, boardName: newName })
      })
      .then(resp => resp.text())
      .then(result => {
        if (result === 'success') {
          alert("ÏàòÏ†ï ÏÑ±Í≥µ!");
          loadFolders();
        } else {
          alert("ÏàòÏ†ï Ïã§Ìå®!");
        }
      });
    }

    // Ìè¥Îçî ÏÇ≠Ï†ú
    function deleteFolder(boardCode) {
      if (!confirm("Ï†ïÎßê ÏÇ≠Ï†úÌï†ÍπåÏöî?")) return;

      fetch(`/board/folder/${boardCode}`, {
        method: "DELETE"
      })
      .then(resp => resp.text())
      .then(result => {
        if (result === 'success') {
          alert("ÏÇ≠Ï†ú ÏÑ±Í≥µ!");
          loadFolders();
        } else {
          alert("ÏÇ≠Ï†ú Ïã§Ìå®!");
        }
      });
    } -->


    <!-- </script> -->

</body>

</html>


<script src="/js/board/boardType.js"></script>
</body>

</html>