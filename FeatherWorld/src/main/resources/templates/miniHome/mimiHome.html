<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FeatherWorld</title>
    <!-- 공용 css/js 추가 -->
    <th:block th:replace="~{common/common}"></th:block>
    <!-- 아이콘 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- myPage 전용 CSS -->
    <link rel="stylesheet" href="../../static/css/miniHome/miniHome.css" />
  </head>
  <body>
    <div class="container">
      <!-- Left sidebar - Profile Information -->
      <div class="left-sidebar">
        <header class="logo">
          <p>Today / Total</p>
        </header>

        <div class="profile-info">
          <div class="profile-image">
            <img
              th:src="${session.loginMember != null && session.loginMember.
              memberImg != null} ? @{${session.loginMember.memberImg}} : @{/images/user.png}"
              alt="Profile Image"
            />
          </div>

          <!-- 회원 번호 표시 -->
          <div class="profile-name" th:text="${memberno}">회원번호</div>

          <!-- 닉네임 (@ 표시 포함) -->
          <div class="profile-handle" th:text="'@' + ${nickname}">@닉네임</div>

          <!-- 팔로워 / 팔로잉 수 -->
          <div class="profile-stats">
            <div class="stat">
              <div class="stat-number" th:text="${followerCount}">0</div>
              <div class="stat-label">Follower</div>
            </div>
            <div class="stat">
              <div class="stat-number" th:text="${followingCount}">0</div>
              <div class="stat-label">Following</div>
            </div>
          </div>

          <!-- 프로필 편집 / 로그아웃 버튼 -->
          <div class="profile-action">
            <button id="editProfileBtn" class="action-button Edit-button">
              Edit Profile
            </button>
            <button class="action-button Logout-button">Logout</button>
          </div>
        </div>

        <!-- 추가 기능 버튼 -->
        <div class="profile-action">
          <button class="action-button Board-button">Bio</button>
        </div>

        <div class="profile-action">
          <button class="action-button surfing-button">surfing</button>
        </div>
      </div>

      <!-- Middle sidebar - Posts -->
      <div class="middle-sidebar">
        <div class="boardContainer">
          <div class="boardSummary">
            <div class="summary-links">
              <a href="#">Board Total</a>
              <a href="#">Guest Book Total</a>
            </div>
          </div>

          <div class="recentBoard">Recent Board</div>

          <!-- 이미지 4개 행 추가 -->
          <div class="small-image-row">
            <img
              src="/FeatherWorld/src/main/resources/static/images/sample1.jpg"
              alt="Image 1"
            />
            <img
              src="/FeatherWorld/src/main/resources/static/images/sample2.jpg"
              alt="Image 2"
            />
            <img
              src="/FeatherWorld/src/main/resources/static/images/sample3.jpg"
              alt="Image 3"
            />
            <img
              src="/FeatherWorld/src/main/resources/static/images/sample4.jpg"
              alt="Image 4"
            />
          </div>

          <textarea
            class="Comment"
            placeholder="Write Friend Comment."
          ></textarea>

          <div class="comment-header">
            <div class="title">Friend Comment List</div>
            <button id="write-button" class="write-button">Write</button>
          </div>
          <div id="comment-form" style="display: none; margin-top: 10px">
            <textarea
              id="comment-input"
              class="Comment"
              placeholder="댓글을 작성하세요..."
            ></textarea>
            <button id="submit-comment" class="write-button">댓글 등록</button>
          </div>

          <!-- 댓글 부분 -->
<div class="comment-list" id="comment-list">
  <div th:each="comment : ${comments}">
    <div class="comment-item">
      <img 
        th:src="${comment.memberImg != null} ? @{${comment.memberImg}} : @{/images/user.png}" 
        alt="User avatar" 
        class="avatar" />
      <div class="comment-content">
        <span class="username" th:text="${comment.username}">사용자명</span>
        <span class="comment-text" th:text="${comment.commentText}">댓글 내용</span>
        <div class="comment-meta">
          <span class="user-role" th:text="${comment.userRole}">역할</span>
          <button class="delete-btn">Delete</button>
        </div>
      </div>
    </div>
    <hr />
  </div>
</div>
          </div>
        </div>
      </div>

      <!--                          -->

       <!-- Right sidebar - Navigation Menu -->
         <div class="right-sidebar">
  <div class="nav-sidebar">
    <div class="nav-item">
      <a th:href="@{/{member}/minihome(member=${memberNo})}">
        <i class="fas fa-house"></i> Home
      </a>
    </div>
    <div class="nav-item">
      <a th:href="@{/{member}/profile(member=${memberNo})}">
        <i class="fas fa-user"></i> Profile
      </a>
    </div>
    <div class="nav-item">
      <a th:href="@{/{member}/board/{type}(member=${memberNo}, type=${session.boardTypeList[0]?.boardCode})}">
        <i class="fas fa-clipboard-list"></i> Board
      </a>
    </div>
    <div class="nav-item">
      <a th:href="@{/{member}/friendlist(member=${memberNo})}">
        <i class="fas fa-user-friends"></i> Friendlist
      </a>
    </div>
    <div class="nav-item">
      <a th:href="@{/{member}/playlist(member=${memberNo})}">
        <i class="fas fa-play"></i> Playlist
      </a>
    </div>
    <div class="nav-item">
      <a th:href="@{/{member}/guestbook(member=${memberNo})}">
        <i class="fas fa-book"></i> Guestbook
      </a>
    </div>
  </div>
</div>

    <!-- 푸터 추가 -->
    <th:block th:replace="~{common/footer}"></th:block>

    <script src="../../static/js/miniHome/miniHome.js"></script>
  </body>
</html>
