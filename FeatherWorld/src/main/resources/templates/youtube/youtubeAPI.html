<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>YouTube Embed</title>
  <!-- 공용 css/js 추가 -->
  <th:block th:replace="~{common/common}"></th:block>
  <!-- 아이콘 -->
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    <!-- myPage 전용 CSS -->
  <link rel="stylesheet" href="/FeatherWorld/src/main/resources/static/css/myPage.css">

</head>
<body>
  <div class="container">
        <!-- Left Panel - Profile Information -->
        <div class="left-panel">
            <header class="logo">
                <p>Today / Total</p>
            </header>

            <div class="profile-info">
                <div class="profile-image">
                    <img src="/FeatherWorld/src/main/resources/static/images/user.png" alt="프로필 이미지">
                </div>
                <div class="profile-name">반응형</div>
                <div class="profile-handle">@re</div>
                <div class="profile-stats">
                    
                    <div class="stat">
                        <div class="stat-number">128</div>
                        <div class="stat-label">Follower</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number">97</div>
                        <div class="stat-label">Following</div>
                    </div>
                </div>
                <div class="profile-action">
                    <button class="action-button Edit-button">Edit Profile</button>
                    <button class="action-button Logout-button">Logout</button>
                </div>
            </div>
        
            <!-- 여기 추가 -->
              <div class="profile-action">
                <button class="action-button Board-button">Bio</button>
              </div>
            
            <div class="profile-action">
                    <button class="action-button surfing-button">surfing</button>
                </div>
        </div>

        <!-- middle -->
         <div class="middle-panel">
            <div class="header">

        <input type="text" id="youtubeUrl" placeholder="Youtube URL Input">
        <div id="videoContainer"></div>


        <script>
    const input = document.getElementById('youtubeUrl');
    const container = document.getElementById('videoContainer');
  
    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        const url = input.value.trim();
  
        // 기본 초기화
        let embedUrl = "";
  
        // 1. playlist 링크인지 확인
        const playlistMatch = url.match(/[?&]list=([a-zA-Z0-9_-]+)/);
        // 2. 단일 영상인지 확인
        const videoMatch = url.match(/(?:youtube\.com\/.*[?&]v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
  
        if (playlistMatch && url.includes("playlist")) {
          const listId = playlistMatch[1];
          embedUrl = `https://www.youtube.com/embed/videoseries?list=${listId}`;
        } else if (videoMatch) {
          const videoId = videoMatch[1];
          embedUrl = `https://www.youtube.com/embed/${videoId}`;
        } else {
          alert("올바른 유튜브 영상 또는 재생목록 URL을 입력해주세요.");
          return;
        }
  
        // iframe 생성
        container.innerHTML = `
          <div class="embed-container">
            <iframe 
              src="${embedUrl}" 
              allowfullscreen 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture">
            </iframe>
          </div>
        `;
      }
    });
  </script>

    <!-- confirm 버튼 -->
    <!-- body 안 버튼 -->
<div class="post-actions">
  <button class="post-button">
    <i class="fas fa-check"></i> Confirm
  </button>
</div>

  </div>
        </div>
  
  <!-- Right Panel - Navigation Menu -->
        <div class="right-panel">
            <div class="menu-item">
                <i class="fas fa-house"></i> Home
            </div>
            <div class="menu-item profile-menu">
                 <i class="fas fa-user"></i> Profile
            </div>
            <div class="menu-item">
               <i class="fas fa-clipboard-list"></i> Board
            </div>
            <div class="menu-item">
               <i class="fas fa-user-friends"></i> FriendList
            </div>
            <div class="menu-item playlist-list">
              <i class="fas fa-play"></i> Playlist
          </div>
            <div class="menu-item">
                <i class="fas fa-book"></i> Guestbook
            </div>
        </div>
    </div>

     <!-- 푸터 추가 -->
   <th:block th:replace="~{common/footer}"></th:block>

</body>
</html>
