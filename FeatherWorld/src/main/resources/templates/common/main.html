<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title th:text="#{app.name}">Feathers McGrew Semi Project</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
  
     <th:block th:replace="~{common/common}"></th:block>

</head>
<body>
    <!-- Header Fragment -->
    <div th:replace="~{common/header}"></div>
    
    <main class="main-content">
       
        <div class="container">
            <!-- Search Bar -->
            <div class="main-sections">
             <section class="left-panel">
            

            <div class="search-bar">
                <input type="text" placeholder="Member Search" class="member-search">
                <button class="search-btn">
                    <img th:src="@{/images/icons/search.png}" alt="Search" class="search-icon">
                </button>
            </div>
            
            <!-- Today's Best Section -->
            <section class="todays-best">
                <h2 class="section-title">TODAY'S BEST</h2>
                <div class="members-list">
                    
                    <!-- Ï≤´Î≤àÏß∏Ï§Ñ Ìà¨Îç∞Ïù¥Î≤†Ïä§Ìä∏ -->
                    <div class="member-row">
                        <div class="member-card highlight">
                            <div class="member-avatar">
                                <img th:src="@{/images/user.png}" alt="Member Avatar">
                            </div>
                            <p class="member-name">üî• ÏïàÏ§ÄÏÑ±</p>
                        </div>
                        <div class="member-card">
                            <div class="member-avatar">
                                <img th:src="@{/images/user.png}" alt="Member Avatar">
                            </div>
                            <p class="member-name">ÏÜêÏÑùÏ§Ä</p>
                        </div>
                        <div class="member-card">
                            <div class="member-avatar">
                                <img th:src="@{/images/user.png}" alt="Member Avatar">
                            </div>
                            <p class="member-name">Ïù¥Ïú§ÏßÑ</p>
                        </div>
                    </div>
                    
                    <!-- ÎëêÎ≤àÏß∏Ï§Ñ Ìà¨Îç∞Ïù¥Î≤†Ïä§Ìä∏ -->
                    <div class="member-row">
                        <div class="member-card">
                            <div class="member-avatar">
                                <img th:src="@{/images/user.png}" alt="Member Avatar">
                            </div>
                            <p class="member-name">ÍπÄÏòÅÎØº</p>
                        </div>
                        <div class="member-card">
                            <div class="member-avatar">
                                <img th:src="@{/images/user.png}" alt="Member Avatar">
                            </div>
                            <p class="member-name">ÌóàÎ∞∞Î†π</p>
                        </div>
                        <div class="member-card">
                            <div class="member-avatar">
                                <img th:src="@{/images/user.png}" alt="Member Avatar">
                            </div>
                            <p class="member-name">ÍπÄÏßÄÌò∏</p>
                        </div>
                    </div>
                </div>
            </section>
            </section>
            
            <!-- Î°úÍ∑∏Ïù∏ÏÑ∏ÏÖò -->
             <div class="right-panel">
            <section class="login-section" th:if="${session.loginMember == null}">
                <h2 class="section-title">SIGN IN</h2>
                
                <!-- Î°úÍ∑∏Ïù∏Ïù¥ ÏïàÎêòÏñ¥ÏûáÏùÑÎñÑ-->
                <form class="login-form" action="/member/login" method="post">
                    <div class="form-group">
                        <label for="username">Email :</label>
                        <input type="text" id="username" name="memberEmail" placeholder="EmailÏùÑÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label for="password">PASSWORD :</label>
                        <input type="password" id="password" name="memberPw" placeholder="PasswordÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî." class="form-input">
                    </div>
                    
                    <button type="submit" class="login-btn">Î°úÍ∑∏Ïù∏</button>
                    
                    <div class="social-login">
                        <button type="button" class="kakao-btn" onclick="kakaoLogin()">
                            <img th:src="@{/images/icons/kakao.png}" alt="Kakao" class="kakao-icon">
                            Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏
                        </button>
                    </div>
                    
                    <div class="login-options">
                        <a href="/member/findIdPw" class="option-link">ÏïÑÏù¥Îîî/ÎπÑÎ∞ÄÎ≤àÌò∏ Ï∞æÍ∏∞</a>
                        <a href="/member/signUp" class="option-link">ÌöåÏõêÍ∞ÄÏûÖ</a>
                    </div>
                </form>
            </section>
            
            <!--Î°úÍ∑∏Ïù∏Ïù¥ ÎêòÏóàÏùÑÎïå -->
            <section class="profile-section" th:if="${session.loginMember != null}">
                <div class="profile-container">
                    <div class="profile-avatar">
                        <img th:src="${session.loginMember.profileImage}" alt="Profile" class="profile-img">
                    </div>
                    <h2 class="profile-name" th:text="${session.loginMember.memberName}">ÏïàÏ§ÄÏÑ±</h2>
                    <p class="profile-email" th:text="${session.loginMember.memberEmail}">Me@google.com</p>
                    
                    <div class="profile-actions">
                        <a href="/member/home" class="home-btn">
                            <img th:src="@{/static/images/icons/home.png}" alt="Home" class="home-icon">
                            My Home
                        </a>
                        <a href="/logout" class="logout-btn">Logout</a>
                    </div>
                </div>
            </section>
            </div>
        </div>
        </div>
    </main>
    
    <!-- Footer Fragment -->
    <div th:replace="~{common/footer}"></div>
    
    <!-- Kakao SDK -->
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <script>
        // Kakao SDK init
        Kakao.init('YOUR_KAKAO_APP_KEY');
        
        function kakaoLogin() {
            Kakao.Auth.login({
                success: function(authObj) {
                    Kakao.API.request({
                        url: '/v2/user/me',
                        success: function(res) {
                            const kakaoAccount = res.kakao_account;
                            
                            // Send data to server
                            const form = document.createElement('form');
                            form.method = 'POST';
                            form.action = '/kakaoLogin';
                            
                            const emailInput = document.createElement('input');
                            emailInput.type = 'hidden';
                            emailInput.name = 'email';
                            emailInput.value = kakaoAccount.email;
                            
                            const nameInput = document.createElement('input');
                            nameInput.type = 'hidden';
                            nameInput.name = 'name';
                            nameInput.value = kakaoAccount.profile.nickname;
                            
                            const profileInput = document.createElement('input');
                            profileInput.type = 'hidden';
                            profileInput.name = 'profileImage';
                            profileInput.value = kakaoAccount.profile.thumbnail_image_url;
                            
                            form.appendChild(emailInput);
                            form.appendChild(nameInput);
                            form.appendChild(profileInput);
                            
                            document.body.appendChild(form);
                            form.submit();
                        },
                        fail: function(error) {
                            console.log(error);
                        }
                    });
                },
                fail: function(err) {
                    console.log(err);
                }
            });
        }
        </script>
    </body>
    </html>
        
  
        
 


