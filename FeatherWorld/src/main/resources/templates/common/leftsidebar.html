<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>FeatherWorld Sidebar</title>
    <link rel="stylesheet" th:href="@{/css/common/leftsidebar.css}" />
  </head>
  <body>
    
    <!-- sidebar.html -->
    <div th:fragment="sidebarFragment" class="left-sidebar">
      <!-- 방문 번호 표시 -->
      <p>Today / Total</p>
      <div class="vistorno" th:text="${vistorno}">회원</div>

      <div class="profile-info">
        <div class="profile-image">
          <img
            th:src="${session.loginMember != null and session.loginMember.memberImg != null} ? @{${session.loginMember.memberImg}} : @{/images/user.png}"
          />
        </div>

        <!-- 회원 표시 -->
        <div class="profile-name" th:text="${membername}">회원</div>

        <!-- 이메일 -->
        <div class="profile-handle" th:text="${memberEmail}">
          user@email.com
        </div>

        <!-- 팔로워 / 팔로잉 수 -->
        <div class="profile-stats">
          <div class="stat">
            <div class="stat-number" th:text="${followerCount}">0</div>
            <div class="stat-label">Follower</div>
          </div>
          <div class="stat">
            <div class="stat-number" th:text="${followingCount}">0</div>
            <div class="stat-label">Following</div>
          </div>
        </div>

        <!-- 로그인한 사용자가 자기 자신의 미니홈피일 때 -->
        <div
          class="profile-action"
          th:if="${session.loginMember != null && member != null && session.loginMember.memberNo == member.memberNo}"
        >
          <button id="editProfileBtn" class="action-button Edit-button">
            Edit Profile
          </button>
          <button class="action-button Logout-button">Logout</button>
        </div>

        <!-- edit 페이지로 넘어갈때 -->
        <div class="profile-action" th:if="${isEditMode}">
          <button id="confirmEditBtn" class="action-button Edit-button">
            Confirm
          </button>
          <button id="backToProfileBtn" class="action-button back-button">
            Back
          </button>
        </div>

        <!-- 여기 추가 -->
        <div
          class="profile-action"
          th:value="${member != null ? member.intro : ''}"
        ></div>

        <!-- follow 버튼 로그인했고, 다른 사람의 미니홈피에 접근한 경우 -->
        <div class="profile-action" th:if="${session.loginMember != null}">
          <button class="action-button" follow-button>follow</button>
        </div>

        <!-- bio -->
        <div id="bio-display" class="bio-display" contenteditable="false"></div>

        <!-- surfing -->
        <div
          class="profile-action"
          th:if="${session.loginMember != null && member != null && session.loginMember.memberNo == member.memberNo}"
        >
          <button class="action-button surfing-button">surfing</button>
        </div>
      </div>
    </div>

    <!-- ✅ JS 연결 -->
    <!-- jQuery 라이브러리 -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- sidebar.js 파일 연결 -->
    <script th:src="@{/js/miniHome/sidebar.js}"></script>
  </body>
</html>
