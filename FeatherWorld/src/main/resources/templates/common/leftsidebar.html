<!-- leftsidebar.html Fragment -->
<div th:fragment="sidebarFragment" class="left-sidebar" xmlns:th="http://www.thymeleaf.org">
  <!-- 방문 번호 표시 -->
  <p>Today / Total</p>
  <div class="vistorno" th:text="${vistorno ?: '1 / 10'}">1 / 10</div>

  <div class="profile-info">
    <div class="profile-image">
      <img
        th:src="${session.loginMember != null and session.loginMember.memberImg != null} ? @{${session.loginMember.memberImg}} : @{/images/user.png}"
        alt="Profile Image"
      />
    </div>

    <!-- 회원 표시 -->
    <div class="profile-name" th:text="${membername ?: '사용자'}">사용자</div>

    <!-- 이메일 -->
    <div class="profile-handle" th:text="${memberEmail ?: 'user@email.com'}">
      user@email.com
    </div>

    <!-- 팔로워 / 팔로잉 수 -->
    <div class="profile-stats">
      <div class="stat">
        <div class="stat-number" th:text="${followerCount ?: 0}">0</div>
        <div class="stat-label">Follower</div>
      </div>
      <div class="stat">
        <div class="stat-number" th:text="${followingCount ?: 0}">0</div>
        <div class="stat-label">Following</div>
      </div>
    </div>

    <!-- 내 프로필일 때 -->
    <div
      class="profile-action button-container"
      th:if="${session.loginMember != null and session.loginMember.memberNo == memberNo}"
    >
      <a
        th:href="@{'/member/edit/' + ${memberNo}}"
        class="action-button Edit-button"
      >
        Edit Profile
      </a>

      <form th:action="@{/logout}" method="post" style="display: inline">
        <button type="submit" class="action-button Logout-button">
          Logout
        </button>
      </form>

      <button class="action-button surfing-button">surfing</button>
    </div>

    <!-- 다른 사람 프로필일 때 follow 버튼 -->
    <div
      class="profile-action"
      th:if="${session.loginMember != null and session.loginMember.memberNo != memberNo}"
    >
      <button class="action-button follow-button">follow</button>
    </div>

    <!-- edit 모드 -->
    <div class="profile-action" th:if="${isEditMode}">
      <button id="confirmEditBtn" class="action-button Edit-button">
        Confirm
      </button>
      <button id="backToProfileBtn" class="action-button back-button">
        Back
      </button>
    </div>

    <div
      id="bio-display"
      class="bio-display"
      th:text="${memberIntro ?: '소개가 없습니다.'}"
    >
      소개가 없습니다.
    </div>
  </div>
</div>

<script th:src="@{/js/miniHome/sidebar.js}"></script>