<div th:fragment="leftsidebar" id="leftProfileContainer">
        <!-- Today/Total 통계 -->
        <div id="profileStatsSection">
            <span>Today <span id="todayCount" th:text="${todayVisits ?: 10}">10</span> / Total <span id="totalCount" th:text="${totalVisits ?: 50}">50</span></span>
        </div>

        <!-- 프로필 이미지 영역 -->
        <div id="profileImageContainer">
            <div id="profileImageWrapper">
                <img id="profileMainImage" 
                     th:src="${member.memberImg != null ? member.memberImg : '/images/user.png'}" 
                     alt="Profile Image" />
                <!-- 프로필 수정 버튼 (본인만 보임) -->
                <div id="profileImageEditIcon" 
                     th:if="${session.loginMember != null and session.loginMember.memberNo == member.memberNo}"
                     onclick="editProfileImage()">
                    <i class="fas fa-edit"></i> edit
                </div>
            </div>
        </div>

        <!-- 사용자 정보 영역 -->
        <div id="profileInfoSection">
            <!-- 사용자명 -->
            <div id="profileUsernameSection">
                <span id="profileUsernameDisplay" th:text="${member.memberName}">사용자명</span>
                <input type="text" id="profileUsernameInput" th:value="${member.memberName}" style="display: none;" />
            </div>
            
            <!-- 이메일 -->
            <div id="profileEmailSection">
                <span id="profileEmailDisplay" th:text="${member.memberEmail}">Email@sample.com</span>
            </div>

            <!-- 팔로워/팔로잉 수 -->
            <div id="profileFollowStats">
                <div id="profileFollowerCount">
                    <span id="profileFollowerNumber" th:text="${followerCount ?: 48}">48</span>
                    <span id="profileFollowerLabel">Follower</span>
                </div>
                <div id="profileFollowingCount">
                    <span id="profileFollowingNumber" th:text="${followingCount ?: 48}">48</span>
                    <span id="profileFollowingLabel">Following</span>
                </div>
            </div>

            <!-- 버튼 영역 -->
            <div id="profileActionButtons">
                <!-- 본인 프로필인 경우 -->
                <div id="profileOwnerButtons" 
                     th:if="${session.loginMember != null and session.loginMember.memberNo == member.memberNo}">
                    <button id="profileEditBtn" onclick="editProfile()">Edit Profile</button>
                    <button id="profileLogoutBtn" onclick="logout()">Logout</button>
                </div>

                <!-- 타인 프로필인 경우 -->
                <div id="profileOtherButtons" 
                     th:if="${session.loginMember != null and session.loginMember.memberNo != member.memberNo}">
                    <!-- 팔로우 버튼 (일촌 관계가 없는 경우) -->
                    <button id="profileFollowBtn" 
                            th:if="${!isIlchon}"
                            th:onclick="'follow(' + ${member.memberNo} + ')'">
                        Follow
                    </button>
                </div>
            </div>

            <!-- 프로필 수정 모드 (본인만) -->
            <div id="profileEditModeButtons" 
                 th:if="${session.loginMember != null and session.loginMember.memberNo == member.memberNo}"
                 style="display: none;">
                <button id="profileConfirmBtn" onclick="confirmEdit()">Confirm</button>
                <button id="profileCancelBtn" onclick="cancelEdit()">Back</button>
            </div>
        </div>

        <!-- Bio 영역 -->
        <div id="profileBioContainer">
            <div id="profileBioTitle">Bio</div>
            <div id="profileBioContent">
                <span id="profileBioDisplay" th:text="${member.memberIntro ?: '자기소개가없습니다'}">Sola Gratia</span>
                <textarea id="profileBioInput" th:text="${member.memberIntro ?: '자기 소개가없습니다.'}" style="display: none;"></textarea>
            </div>
        </div>

        <!-- Surfing 버튼 (본인만) -->
        <div id="profileSurfingSection" 
             th:if="${session.loginMember != null and session.loginMember.memberNo == member.memberNo}">
            <button id="profileSurfingBtn" onclick="goSurfing()">Surfing</button>
        </div>
    </div>
    <script src="/js/miniHome/leftSidebar"></script>